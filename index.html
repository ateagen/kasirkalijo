<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Upload Foto</title>
</head>
<body>
  <h2>Upload Foto ke Google Drive</h2>
  <form id="uploadForm">
    <input type="file" name="file" accept="image/*" required>
    <button type="submit">Upload</button>
  </form>
  
  <h3>Foto yang Sudah Diupload</h3>
  <div id="gallery"></div>

  <script>
    const webAppUrl = "https://script.google.com/macros/s/AKfycbyTnF10LRY0xXiqi4lR6BUb6E7heS6n0Q2dLcnJIWOUgTjQZHIXL9rMUzPDP0liAnyV8g/exec"; // URL Web App Google Script

    // Upload Foto
    document.getElementById("uploadForm").addEventListener("submit", function(e) {
      e.preventDefault();
      const formData = new FormData(this);
      
      fetch(webAppUrl, { method: "POST", body: formData })
        .then(res => res.text())
        .then(txt => {
          if (txt === "OK") {
            alert("Foto berhasil diupload!");
            loadGallery();
          } else {
            alert("Upload gagal: " + txt);
          }
        })
        .catch(err => alert("Error: " + err));
    });

    // Load Foto dari Sheet via Web App
    function loadGallery() {
      fetch(webAppUrl)
        .then(res => res.text())
        .then(html => {
          document.getElementById("gallery").innerHTML = html;
        });
    }

    loadGallery();
  </script>
</body>
</html>
